设计模式- 享元模式
===================================
_[注] 讲解主要以Java环境为主,代码实现可带不同语言版本_

### 提纲
* 问题的产生
* 享元模式主要内容,定义
* 模式结构
* 使用场景
* 通用模式代码(java)
* 优缺点
* 享元模式的注意事项
* 问题讨论
* Ruby中的享元
* Js中的享元

### 问题的产生

  面向对象可以非常方便的解决一些扩展性的问题，但是在这个过程中系统务必会产生一些类或者对象，如果系统中存在对象的个数过多时，将会导致系统的性能下降。对于这样的问题解决最简单直接的办法就是减少系统中对象的个数。

  享元模式提供了一种解决方案，使用共享技术实现相同或者相似对象的重用。也就是说实现相同或者相似对象的代码共享。

### 原型模式主要内容,定义

__所谓享元模式就是运行共享技术有效地支持大量细粒度对象的复用__

系统使用少量对象,而且这些都比较相似，状态变化小，可以实现对象的多次复用。 共享模式是支持大量细粒度对象的复用，所以享元模式要求能够共享的对象必须是细粒度对象。

在了解享元模式之前我们先要了解两个概念：内部状态、外部状态。
       
* 内部状态：在享元对象内部不随外界环境改变而改变的共享部分。
* 外部状态：随着环境的改变而改变，不能够共享的状态就是外部状态。

由于享元模式区分了内部状态和外部状态，所以我们可以通过设置不同的外部状态使得相同的对象可以具备一些不同的特性，而内部状态设置为相同部分。在我们的程序设计过程中，我们可能会需要大量的细粒度对象来表示对象，如果这些对象除了几个参数不同外其他部分都相同，这个时候我们就可以利用享元模式来大大减少应用程序当中的对象。如何利用享元模式呢？这里我们只需要将他们少部分的不同的部分当做参数移动到类实例的外部去，然后再方法调用的时候将他们传递过来就可以了。这里也就说明了一点：__内部状态存储于享元对象内部，而外部状态则应该由客户端来考虑。__

### 模式结构

下面是元模式的UML结构图：
![享元模式UML结构图](http://www.blogjava.net/images/blogjava_net/qileilove/458918d9ha2.jpeg)







